<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Bhai Ka DNS - AI-Powered DNS Server</title>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet">
    <style>
        .gradient-bg {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        }
        .glass-effect {
            backdrop-filter: blur(10px);
            background: rgba(255, 255, 255, 0.1);
            border: 1px solid rgba(255, 255, 255, 0.2);
        }
        .ai-glow {
            box-shadow: 0 0 20px rgba(102, 126, 234, 0.5);
        }
        .typing-animation {
            overflow: hidden;
            border-right: .15em solid orange;
            white-space: nowrap;
            margin: 0 auto;
            letter-spacing: .15em;
            animation: typing 3.5s steps(40, end), blink-caret .75s step-end infinite;
        }
        @keyframes typing {
            from { width: 0 }
            to { width: 100% }
        }
        @keyframes blink-caret {
            from, to { border-color: transparent }
            50% { border-color: orange; }
        }
        .pulse-dot {
            animation: pulse 2s infinite;
        }
        @keyframes pulse {
            0% { transform: scale(0.95); box-shadow: 0 0 0 0 rgba(102, 126, 234, 0.7); }
            70% { transform: scale(1); box-shadow: 0 0 0 10px rgba(102, 126, 234, 0); }
            100% { transform: scale(0.95); box-shadow: 0 0 0 0 rgba(102, 126, 234, 0); }
        }
    </style>
</head>
<body class="bg-gray-900 text-white">
    <!-- Navigation -->
    <nav class="bg-black bg-opacity-50 backdrop-filter backdrop-blur-lg fixed w-full z-50">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="flex items-center justify-between h-16">
                <div class="flex items-center">
                    <i class="fas fa-rocket text-2xl text-purple-400 mr-2"></i>
                    <span class="text-xl font-bold">Bhai Ka DNS</span>
                </div>
                <div class="hidden md:block">
                    <div class="ml-10 flex items-baseline space-x-4">
                        <a href="#home" class="hover:text-purple-400 transition-colors">Home</a>
                        <a href="#features" class="hover:text-purple-400 transition-colors">Features</a>
                        <a href="#tools" class="hover:text-purple-400 transition-colors">Tools</a>
                        <a href="#analytics" class="hover:text-purple-400 transition-colors">Analytics</a>
                    </div>
                </div>
            </div>
        </div>
    </nav>

    <!-- Hero Section -->
    <section id="home" class="gradient-bg min-h-screen flex items-center justify-center relative overflow-hidden">
        <div class="absolute inset-0 bg-black opacity-50"></div>
        <div class="relative z-10 text-center max-w-4xl mx-auto px-4">
            <h1 class="text-6xl md:text-8xl font-bold mb-6">
                <span class="typing-animation">Bhai Ka DNS</span>
            </h1>
            <p class="text-xl md:text-2xl mb-8 opacity-90">
                AI-Powered DNS Server with Smart Threat Detection & Intelligent Caching
            </p>
            <div class="flex flex-col sm:flex-row gap-4 justify-center items-center">
                <button class="bg-purple-600 hover:bg-purple-700 px-8 py-3 rounded-lg font-semibold transition-all ai-glow">
                    <i class="fas fa-play mr-2"></i>Get Started
                </button>
                <button class="border border-white border-opacity-50 hover:bg-white hover:bg-opacity-10 px-8 py-3 rounded-lg font-semibold transition-all">
                    <i class="fas fa-book mr-2"></i>Documentation
                </button>
            </div>
            <div class="mt-12 flex justify-center">
                <div class="pulse-dot w-4 h-4 bg-purple-400 rounded-full"></div>
            </div>
        </div>
    </section>

    <!-- Features Section -->
    <section id="features" class="py-20 bg-gray-800">
        <div class="max-w-7xl mx-auto px-4">
            <h2 class="text-4xl font-bold text-center mb-12">AI-Powered Features</h2>
            <div class="grid md:grid-cols-3 gap-8">
                <div class="glass-effect p-6 rounded-lg">
                    <div class="text-purple-400 text-3xl mb-4">
                        <i class="fas fa-shield-alt"></i>
                    </div>
                    <h3 class="text-xl font-semibold mb-3">Threat Detection</h3>
                    <p class="text-gray-300">AI-powered malware and phishing domain detection with real-time blocking</p>
                </div>
                <div class="glass-effect p-6 rounded-lg">
                    <div class="text-purple-400 text-3xl mb-4">
                        <i class="fas fa-brain"></i>
                    </div>
                    <h3 class="text-xl font-semibold mb-3">Smart Caching</h3>
                    <p class="text-gray-300">Intelligent DNS caching with AI-optimized TTL and predictive preloading</p>
                </div>
                <div class="glass-effect p-6 rounded-lg">
                    <div class="text-purple-400 text-3xl mb-4">
                        <i class="fas fa-spell-check"></i>
                    </div>
                    <h3 class="text-xl font-semibold mb-3">Typo Correction</h3>
                    <p class="text-gray-300">Automatic typo detection and correction for common domain misspellings</p>
                </div>
            </div>
        </div>
    </section>

    <!-- DNS Tools Section -->
    <section id="tools" class="py-20 bg-gray-900">
        <div class="max-w-4xl mx-auto px-4">
            <h2 class="text-4xl font-bold text-center mb-12">DNS Tools</h2>
            
            <!-- DNS Lookup Tool -->
            <div class="glass-effect p-8 rounded-lg mb-8">
                <h3 class="text-2xl font-semibold mb-6 flex items-center">
                    <i class="fas fa-search mr-3 text-purple-400"></i>
                    DNS Lookup with AI Analysis
                </h3>
                <div class="flex gap-4 mb-6">
                    <input type="text" id="lookupDomain" placeholder="Enter domain (e.g., google.com)" 
                           class="flex-1 bg-gray-700 border border-gray-600 rounded-lg px-4 py-3 focus:outline-none focus:border-purple-400">
                    <button onclick="performLookup()" 
                            class="bg-purple-600 hover:bg-purple-700 px-6 py-3 rounded-lg transition-colors">
                        <i class="fas fa-search mr-2"></i>Lookup
                    </button>
                </div>
                <div id="lookupResult" class="hidden">
                    <div class="bg-gray-800 rounded-lg p-6">
                        <div id="dnsRecords" class="mb-6"></div>
                        <div id="aiAnalysis" class="border-t border-gray-600 pt-6"></div>
                    </div>
                </div>
            </div>

            <!-- Domain Suggestions Tool -->
            <div class="glass-effect p-8 rounded-lg mb-8">
                <h3 class="text-2xl font-semibold mb-6 flex items-center">
                    <i class="fas fa-lightbulb mr-3 text-purple-400"></i>
                    AI Domain Suggestions
                </h3>
                <div class="flex gap-4 mb-6">
                    <input type="text" id="suggestDomain" placeholder="Enter domain for suggestions" 
                           class="flex-1 bg-gray-700 border border-gray-600 rounded-lg px-4 py-3 focus:outline-none focus:border-purple-400">
                    <button onclick="getSuggestions()" 
                            class="bg-purple-600 hover:bg-purple-700 px-6 py-3 rounded-lg transition-colors">
                        <i class="fas fa-magic mr-2"></i>Suggest
                    </button>
                </div>
                <div id="suggestions" class="hidden">
                    <div class="bg-gray-800 rounded-lg p-6">
                        <h4 class="font-semibold mb-4">AI Suggestions:</h4>
                        <div id="suggestionsList"></div>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Analytics Section -->
    <section id="analytics" class="py-20 bg-gray-800">
        <div class="max-w-6xl mx-auto px-4">
            <h2 class="text-4xl font-bold text-center mb-12">Live Analytics</h2>
            <div class="grid md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8">
                <div class="glass-effect p-6 rounded-lg text-center">
                    <div class="text-3xl font-bold text-purple-400 mb-2" id="totalQueries">0</div>
                    <div class="text-sm text-gray-300">Total Queries</div>
                </div>
                <div class="glass-effect p-6 rounded-lg text-center">
                    <div class="text-3xl font-bold text-red-400 mb-2" id="blockedThreats">0</div>
                    <div class="text-sm text-gray-300">Threats Blocked</div>
                </div>
                <div class="glass-effect p-6 rounded-lg text-center">
                    <div class="text-3xl font-bold text-green-400 mb-2" id="cacheHits">0</div>
                    <div class="text-sm text-gray-300">Cache Hits</div>
                </div>
                <div class="glass-effect p-6 rounded-lg text-center">
                    <div class="text-3xl font-bold text-yellow-400 mb-2" id="aiSuggestions">0</div>
                    <div class="text-sm text-gray-300">AI Suggestions</div>
                </div>
            </div>
            <div class="glass-effect p-6 rounded-lg">
                <h3 class="text-xl font-semibold mb-4">Server Status</h3>
                <div class="flex items-center">
                    <div class="w-3 h-3 bg-green-400 rounded-full mr-3 pulse-dot"></div>
                    <span>Bhai Ka DNS is running on port 5353</span>
                </div>
                <div class="mt-4 text-sm text-gray-300">
                    <p>Use this DNS server: <code class="bg-gray-700 px-2 py-1 rounded">dig @localhost -p 5353 example.com</code></p>
                </div>
            </div>
        </div>
    </section>

    <!-- Footer -->
    <footer class="bg-black py-8">
        <div class="max-w-7xl mx-auto px-4 text-center">
            <p class="text-gray-400">
                &copy; 2024 Bhai Ka DNS - AI-Powered DNS Server | 
                <i class="fas fa-heart text-red-400"></i> Made with AI
            </p>
        </div>
    </footer>

    <script>
        // DNS Lookup Function
        async function performLookup() {
            const domain = document.getElementById('lookupDomain').value.trim();
            if (!domain) {
                alert('Please enter a domain');
                return;
            }

            const resultDiv = document.getElementById('lookupResult');
            const recordsDiv = document.getElementById('dnsRecords');
            const analysisDiv = document.getElementById('aiAnalysis');

            try {
                const response = await fetch('/api/lookup', {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({ domain })
                });

                const data = await response.json();
                
                if (data.error) {
                    alert(data.error);
                    return;
                }

                // Display DNS records
                let recordsHTML = '<h4 class="font-semibold mb-4">DNS Records:</h4>';
                for (const [type, records] of Object.entries(data.records)) {
                    if (records.length > 0) {
                        recordsHTML += `<div class="mb-3">
                            <span class="font-semibold text-purple-400">${type}:</span>
                            <div class="ml-4">
                                ${records.map(record => `<div class="text-gray-300">${record}</div>`).join('')}
                            </div>
                        </div>`;
                    }
                }
                recordsDiv.innerHTML = recordsHTML;

                // Display AI analysis
                const analysis = data.ai_analysis;
                let analysisHTML = `<h4 class="font-semibold mb-4">AI Security Analysis:</h4>
                    <div class="grid md:grid-cols-2 gap-4">
                        <div>
                            <div class="mb-2">Security Score: <span class="font-bold ${getScoreColor(analysis.security_score)}">${analysis.security_score}/100</span></div>
                            <div class="mb-2">Trust Level: <span class="font-bold ${getTrustColor(analysis.trust_level)}">${analysis.trust_level.toUpperCase()}</span></div>
                            <div class="mb-2">Category: <span class="text-purple-400">${analysis.category}</span></div>
                        </div>
                        <div>`;
                
                if (analysis.flags.length > 0) {
                    analysisHTML += '<div class="mb-2">Flags:</div><ul class="text-yellow-400 text-sm ml-4">';
                    analysis.flags.forEach(flag => {
                        analysisHTML += `<li>• ${flag}</li>`;
                    });
                    analysisHTML += '</ul>';
                }
                
                if (analysis.recommendations.length > 0) {
                    analysisHTML += '<div class="mt-2 mb-2">Recommendations:</div><ul class="text-orange-400 text-sm ml-4">';
                    analysis.recommendations.forEach(rec => {
                        analysisHTML += `<li>• ${rec}</li>`;
                    });
                    analysisHTML += '</ul>';
                }
                
                analysisHTML += '</div></div>';
                analysisDiv.innerHTML = analysisHTML;

                resultDiv.classList.remove('hidden');
            } catch (error) {
                alert('Lookup failed: ' + error.message);
            }
        }

        // Domain Suggestions Function
        async function getSuggestions() {
            const domain = document.getElementById('suggestDomain').value.trim();
            if (!domain) {
                alert('Please enter a domain');
                return;
            }

            try {
                const response = await fetch('/api/suggest', {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({ domain })
                });

                const data = await response.json();
                
                if (data.error) {
                    alert(data.error);
                    return;
                }

                const suggestionsDiv = document.getElementById('suggestions');
                const listDiv = document.getElementById('suggestionsList');
                
                let html = '';
                data.suggestions.forEach(suggestion => {
                    const confidence = Math.round(suggestion.confidence * 100);
                    html += `<div class="bg-gray-700 p-3 rounded mb-2">
                        <div class="font-semibold text-purple-400">${suggestion.domain}</div>
                        <div class="text-sm text-gray-300">${suggestion.reason}</div>
                        <div class="text-xs text-green-400">Confidence: ${confidence}%</div>
                    </div>`;
                });
                
                listDiv.innerHTML = html;
                suggestionsDiv.classList.remove('hidden');
            } catch (error) {
                alert('Failed to get suggestions: ' + error.message);
            }
        }

        // Analytics Functions
        async function updateAnalytics() {
            try {
                const response = await fetch('/api/stats');
                const data = await response.json();
                
                document.getElementById('totalQueries').textContent = data.total_queries || 0;
                document.getElementById('blockedThreats').textContent = data.blocked_threats || 0;
                document.getElementById('cacheHits').textContent = data.cache_hits || 0;
                document.getElementById('aiSuggestions').textContent = data.ai_suggestions || 0;
            } catch (error) {
                console.log('Failed to fetch analytics:', error);
            }
        }

        // Helper functions
        function getScoreColor(score) {
            if (score >= 80) return 'text-green-400';
            if (score >= 60) return 'text-yellow-400';
            if (score >= 40) return 'text-orange-400';
            return 'text-red-400';
        }

        function getTrustColor(trust) {
            switch(trust) {
                case 'high': return 'text-green-400';
                case 'medium': return 'text-yellow-400';
                case 'low': return 'text-orange-400';
                case 'very_low': return 'text-red-400';
                default: return 'text-gray-400';
            }
        }

        // Initialize
        document.addEventListener('DOMContentLoaded', function() {
            updateAnalytics();
            setInterval(updateAnalytics, 5000); // Update every 5 seconds
            
            // Add enter key support for inputs
            document.getElementById('lookupDomain').addEventListener('keypress', function(e) {
                if (e.key === 'Enter') performLookup();
            });
            
            document.getElementById('suggestDomain').addEventListener('keypress', function(e) {
                if (e.key === 'Enter') getSuggestions();
            });
        });

        // Smooth scrolling for navigation
        document.querySelectorAll('a[href^="#"]').forEach(anchor => {
            anchor.addEventListener('click', function (e) {
                e.preventDefault();
                document.querySelector(this.getAttribute('href')).scrollIntoView({
                    behavior: 'smooth'
                });
            });
        });
    </script>
</body>
</html>